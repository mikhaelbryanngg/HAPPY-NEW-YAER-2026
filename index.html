<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>New Year 2026 Celebration</title>
    <style>
        body, html {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
            background-color: #000105;
            color: #fff;
            font-family: 'Montserrat', 'Segoe UI', sans-serif;
            overflow: hidden;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        canvas {
            position: absolute;
            top: 0;
            left: 0;
            z-index: 1;
        }

        #overlay {
            position: relative;
            z-index: 10;
            text-align: center;
            pointer-events: none;
        }

        #startBtn {
            padding: 15px 35px;
            font-size: 1rem;
            background: rgba(255, 255, 255, 0.05);
            color: white;
            border: 1px solid rgba(255,255,255,0.3);
            cursor: pointer;
            letter-spacing: 5px;
            transition: 0.5s;
            pointer-events: auto;
            border-radius: 4px;
        }

        #startBtn:hover {
            background: white;
            color: black;
        }

        #countdown {
            font-size: 8rem;
            font-weight: 100;
            display: none;
        }

        #typing-container {
            font-size: 2.8rem;
            font-weight: 200;
            letter-spacing: 15px;
            text-transform: uppercase;
            display: none;
            text-shadow: 0 0 20px rgba(255,255,255,0.4);
        }

        .cursor {
            display: inline-block;
            width: 2px;
            height: 1.1em;
            background-color: white;
            margin-left: 8px;
            vertical-align: middle;
            animation: blink 0.8s infinite;
        }

        @keyframes blink { 50% { opacity: 0; } }

        .zoom-anim { animation: zoomInOut 1s ease-in-out forwards; }
        @keyframes zoomInOut {
            0% { transform: scale(1.5); opacity: 0; }
            50% { transform: scale(1); opacity: 1; }
            100% { transform: scale(0.8); opacity: 0; }
        }
    </style>
</head>
<body>

    <canvas id="canvas"></canvas>

    <div id="overlay">
        <button id="startBtn">START CELEBRATION</button>
        <div id="countdown"></div>
        <div id="typing-container"><span id="text"></span><span class="cursor"></span></div>
    </div>

    <script>
        const canvas = document.getElementById('canvas');
        const ctx = canvas.getContext('2d');
        const startBtn = document.getElementById('startBtn');
        const countdownEl = document.getElementById('countdown');
        const typingContainer = document.getElementById('typing-container');
        const textEl = document.getElementById('text');

        let width, height, stars = [], fireworks = [], particles = [], canLaunch = false;

        function init() {
            width = canvas.width = window.innerWidth;
            height = canvas.height = window.innerHeight;
            stars = [];
            for (let i = 0; i < 200; i++) {
                stars.push({
                    x: Math.random() * width,
                    y: Math.random() * height,
                    size: Math.random() * 1.2,
                    opacity: Math.random(),
                    speed: 0.005 + Math.random() * 0.01
                });
            }
        }

        function drawStars() {
            stars.forEach(s => {
                s.opacity += s.speed;
                if (s.opacity > 1 || s.opacity < 0) s.speed = -s.speed;
                ctx.fillStyle = `rgba(255, 255, 255, ${Math.abs(s.opacity)})`;
                ctx.beginPath();
                ctx.arc(s.x, s.y, s.size, 0, Math.PI * 2);
                ctx.fill();
            });
        }

        class Firework {
            constructor() {
                this.x = width / 2;
                this.y = height;
                // Sangat tinggi (10% - 25% dari atas layar)
                this.targetY = (Math.random() * height * 0.15) + (height * 0.1);
                
                // Menghindari teks di tengah
                const sideArea = width * 0.35;
                this.targetX = Math.random() > 0.5 ? Math.random() * sideArea : width - (Math.random() * sideArea);
                
                this.speed = 14 + Math.random() * 4;
                this.angle = Math.atan2(this.targetY - this.y, this.targetX - this.x);
                this.hue = Math.random() * 360;
                this.alive = true;
                this.trail = [];
            }

            update() {
                // Jejak buntut sangat pendek & halus (profesional)
                this.trail.push({x: this.x, y: this.y});
                if(this.trail.length > 5) this.trail.shift();

                this.x += Math.cos(this.angle) * this.speed;
                this.y += Math.sin(this.angle) * this.speed;
                this.speed *= 0.975;

                if (this.speed < 3 || this.y <= this.targetY) {
                    this.alive = false;
                    this.explode();
                }
            }

            draw() {
                ctx.beginPath();
                ctx.lineWidth = 1;
                ctx.strokeStyle = `hsla(${this.hue}, 100%, 80%, 0.3)`;
                if(this.trail.length > 0) {
                    ctx.moveTo(this.trail[0].x, this.trail[0].y);
                    for(let p of this.trail) ctx.lineTo(p.x, p.y);
                }
                ctx.stroke();
            }

            explode() {
                for (let i = 0; i < 200; i++) {
                    particles.push(new Particle(this.x, this.y, this.hue));
                }
            }
        }

        class Particle {
            constructor(x, y, hue) {
                this.x = x;
                this.y = y;
                this.hue = hue + (Math.random() * 40 - 20);
                this.opacity = 1;
                this.friction = 0.94 + Math.random() * 0.03;
                this.gravity = 0.08 + Math.random() * 0.05;
                this.angle = Math.random() * Math.PI * 2;
                this.speed = Math.random() * 10 + 2;
                this.vx = Math.cos(this.angle) * this.speed;
                this.vy = Math.sin(this.angle) * this.speed;
                this.decay = 0.007 + Math.random() * 0.012;
                this.isGlitter = Math.random() > 0.3;
            }

            update() {
                this.vx *= this.friction;
                this.vy *= this.friction;
                this.vy += this.gravity;
                this.x += this.vx;
                this.y += this.vy;
                this.opacity -= this.decay;
            }

            draw() {
                ctx.save();
                ctx.globalCompositeOperation = 'lighter';
                if(this.isGlitter && Math.random() > 0.7) {
                    ctx.fillStyle = `#fff`;
                } else {
                    ctx.fillStyle = `hsla(${this.hue}, 100%, 75%, ${this.opacity})`;
                }
                ctx.beginPath();
                ctx.arc(this.x, this.y, 1, 0, Math.PI * 2);
                ctx.fill();
                ctx.restore();
            }
        }

        function loop() {
            ctx.fillStyle = 'rgba(0, 1, 5, 0.25)';
            ctx.fillRect(0, 0, width, height);

            drawStars();

            if (canLaunch && Math.random() < 0.035) {
                fireworks.push(new Firework());
            }

            fireworks = fireworks.filter(f => f.alive);
            fireworks.forEach(f => { f.update(); f.draw(); });

            particles = particles.filter(p => p.opacity > 0);
            particles.forEach(p => { p.update(); p.draw(); });

            requestAnimationFrame(loop);
        }

        function typeWriter(text, i) {
            if (i < text.length) {
                textEl.innerHTML += text.charAt(i);
                setTimeout(() => typeWriter(text, i + 1), 160);
            }
        }

        function runCountdown() {
            let count = 3;
            countdownEl.style.display = 'block';
            const timer = setInterval(() => {
                countdownEl.innerHTML = count;
                countdownEl.classList.remove('zoom-anim');
                void countdownEl.offsetWidth;
                countdownEl.classList.add('zoom-anim');
                count--;
                if (count < 0) {
                    clearInterval(timer);
                    countdownEl.style.display = 'none';
                    startTyping();
                }
            }, 1000);
        }

        function startTyping() {
            typingContainer.style.display = 'block';
            canLaunch = true;
            typeWriter("Happy New Year 2026", 0);
        }

        startBtn.addEventListener('click', () => {
            startBtn.style.display = 'none';
            runCountdown();
            loop();
        });

        window.addEventListener('resize', init);
        init();
    </script>
</body>
</html>